#Bonaa!!!!!!
# emner.py
# Lister for å lagre emnedata
emnekoder = []
semestre = []  # 'høst' eller 'vår'
studiepoeng = []

def lag_nytt_emne():
    kode = input("Skriv emnekode (f.eks. INF100): ")
    semester = input("Undervises emnet i høst eller vår? ").lower()
    poeng = int(input("Antall studiepoeng: "))

    if semester not in ["høst", "vår"]:
        print("Ugyldig semester, prøv igjen.")
        return

    emnekoder.append(kode)
    semestre.append(semester)
    studiepoeng.append(poeng)
    print(f"Emnet {kode} ble lagt til.")

def skriv_ut_emner():
    if not emnekoder:
        print("Ingen emner er registrert ennå.")
        return
    print("\n--- Alle registrerte emner ---")
    for i in range(len(emnekoder)):
        print(f"{emnekoder[i]} ({semestre[i]}, {studiepoeng[i]} studiepoeng)")




#Daniel!!!!!!!

# studieplan.py

from emner import emnekoder, semestre, studiepoeng

# Seks semester, hver er en liste med indekser til emne-listene
studieplan = [[], [], [], [], [], []]

def legg_til_emne_i_studieplan():
    kode = input("Skriv emnekode: ")

    if kode not in emnekoder:
        print("Emnet finnes ikke. Lag det først.")
        return

    indeks = emnekoder.index(kode)
    sem_type = semestre[indeks]  # 'høst' eller 'vår'

    semester_nr = int(input("Hvilket semester (1-6)? ")) - 1

    # sjekk at emnet ikke allerede finnes
    for s in studieplan:
        if indeks in s:
            print("Dette emnet er allerede i studieplanen.")
            return

    # sjekk semester gyldighet
    if sem_type == "høst" and semester_nr not in [0, 2, 4]:
        print("Høstemner kan bare være i semester 1, 3 eller 5.")
        return
    if sem_type == "vår" and semester_nr not in [1, 3, 5]:
        print("Våremner kan bare være i semester 2, 4 eller 6.")
        return

    # sjekk poenggrense
    total_poeng = sum(studiepoeng[i] for i in studieplan[semester_nr])
    if total_poeng + studiepoeng[indeks] > 30:
        print("Semesteret har ikke plass til flere emner (maks 30 studiepoeng).")
        return

    studieplan[semester_nr].append(indeks)
    print(f"La til {kode} i semester {semester_nr + 1}.")

def skriv_ut_studieplan():
    print("\n--- Studieplan ---")
    for i, semester in enumerate(studieplan, start=1):
        emner_i_semester = [emnekoder[j] for j in semester]
        poengsum = sum(studiepoeng[j] for j in semester)
        print(f"Semester {i}: {', '.join(emner_i_semester) or 'Ingen emner'} ({poengsum} stp)")

def sjekk_gyldighet():
    gyldig = True
    for i, semester in enumerate(studieplan, start=1):
        poengsum = sum(studiepoeng[j] for j in semester)
        if poengsum != 30:
            print(f"Semester {i} er ikke gyldig ({poengsum} stp).")
            gyldig = False
    if gyldig:
        print("Studieplanen er gyldig (alle semestre har 30 studiepoeng).")


#Mika!!!!!!!!!!!!!!


# filhåndtering.py

from emner import emnekoder, semestre, studiepoeng
from studieplan import studieplan

def lagre_til_fil():
    with open("data/emner.txt", "w", encoding="utf-8") as f:
        for i in range(len(emnekoder)):
            f.write(f"{emnekoder[i]},{semestre[i]},{studiepoeng[i]}\n")

    with open("data/studieplan.txt", "w", encoding="utf-8") as f:
        for semester in studieplan:
            f.write(",".join(str(i) for i in semester) + "\n")

    print("Data er lagret til fil.")

def les_fra_fil():
    emnekoder.clear()
    semestre.clear()
    studiepoeng.clear()
    studieplan.clear()

    with open("data/emner.txt", "r", encoding="utf-8") as f:
        for linje in f:
            kode, sem, poeng = linje.strip().split(",")
            emnekoder.append(kode)
            semestre.append(sem)
            studiepoeng.append(int(poeng))

    with open("data/studieplan.txt", "r", encoding="utf-8") as f:
        for linje in f:
            if linje.strip():
                indekser = [int(x) for x in linje.strip().split(",") if x]
                studieplan.append(indekser)
            else:
                studieplan.append([])

    print("Data er lest inn fra fil.")


#Tobias!!!!!!!!!


# main.py

from emner import lag_nytt_emne, skriv_ut_emner
from studieplan import legg_til_emne_i_studieplan, skriv_ut_studieplan, sjekk_gyldighet
from filhåndtering import lagre_til_fil, les_fra_fil

def main():
    while True:
        print("\n--- Studieplanmeny ---")
        print("1. Lag et nytt emne")
        print("2. Legg til et emne i studieplanen")
        print("3. Skriv ut alle registrerte emner")
        print("4. Skriv ut studieplanen")
        print("5. Sjekk om studieplanen er gyldig")
        print("6. Lagre til fil")
        print("7. Les fra fil")
        print("8. Avslutt")

        valg = input("Velg et alternativ: ")

        if valg == "1":
            lag_nytt_emne()
        elif valg == "2":
            legg_til_emne_i_studieplan()
        elif valg == "3":
            skriv_ut_emner()
        elif valg == "4":
            skriv_ut_studieplan()
        elif valg == "5":
            sjekk_gyldighet()
        elif valg == "6":
            lagre_til_fil()
        elif valg == "7":
            les_fra_fil()
        elif valg == "8":
            print("Avslutter programmet.")
            break
        else:
            print("Ugyldig valg, prøv igjen.")

if __name__ == "__main__":
    main()


